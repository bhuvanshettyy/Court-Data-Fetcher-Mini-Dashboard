{% extends "base.html" %}

{% block title %}Court Data Fetcher - Search Cases{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <!-- Header -->
        <div class="text-center mb-5">
            <h1 class="display-4 text-primary">
                <i class="fas fa-balance-scale me-3"></i>
                Court Data Fetcher
            </h1>
            <p class="lead text-muted">
                Search for case information from Delhi High Court
            </p>
            <div class="alert alert-info" role="alert">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Target Court:</strong> Delhi High Court (https://delhihighcourt.nic.in/)
            </div>
        </div>

        <!-- Search Form -->
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-search me-2"></i>
                    Case Search Form
                </h5>
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('search_case') }}" id="searchForm">
                    <div class="row">
                        <!-- Case Type -->
                        <div class="col-md-4 mb-3">
                            <label for="case_type" class="form-label">
                                <i class="fas fa-gavel me-1"></i>Case Type
                            </label>
                            <select class="form-select" id="case_type" name="case_type" required>
                                <option value="">Select Case Type</option>
                                <option value="Writ Petition (Civil)">Writ Petition (Civil)</option>
                                <option value="Writ Petition (Criminal)">Writ Petition (Criminal)</option>
                                <option value="Civil Appeal">Civil Appeal</option>
                                <option value="Criminal Appeal">Criminal Appeal</option>
                                <option value="Civil Suit">Civil Suit</option>
                                <option value="Criminal Case">Criminal Case</option>
                                <option value="Company Petition">Company Petition</option>
                                <option value="Arbitration Petition">Arbitration Petition</option>
                                <option value="Tax Case">Tax Case</option>
                                <option value="Service Matter">Service Matter</option>
                            </select>
                        </div>

                        <!-- Case Number -->
                        <div class="col-md-4 mb-3">
                            <label for="case_number" class="form-label">
                                <i class="fas fa-hashtag me-1"></i>Case Number
                            </label>
                            <input type="text" class="form-control" id="case_number" name="case_number" 
                                   placeholder="e.g., 1234" required>
                        </div>

                        <!-- Filing Year -->
                        <div class="col-md-4 mb-3">
                            <label for="filing_year" class="form-label">
                                <i class="fas fa-calendar me-1"></i>Filing Year
                            </label>
                            <select class="form-select" id="filing_year" name="filing_year" required>
                                <option value="">Select Year</option>
                                {% for year in range(2024, 2004, -1) %}
                                    <option value="{{ year }}">{{ year }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg" id="searchBtn">
                            <i class="fas fa-search me-2"></i>
                            Search Case
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Instructions -->
        <div class="card mt-4">
            <div class="card-header bg-light">
                <h6 class="card-title mb-0">
                    <i class="fas fa-question-circle me-2"></i>
                    How to Use
                </h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6><i class="fas fa-list-ol me-2"></i>Steps:</h6>
                        <ol class="small">
                            <li>Select the appropriate case type from the dropdown</li>
                            <li>Enter the case number (numeric only)</li>
                            <li>Choose the filing year</li>
                            <li>Click "Search Case" to fetch information</li>
                        </ol>
                    </div>
                    <div class="col-md-6">
                        <h6><i class="fas fa-info-circle me-2"></i>Information Retrieved:</h6>
                        <ul class="small">
                            <li>Party names (Petitioner/Respondent)</li>
                            <li>Filing date and next hearing date</li>
                            <li>Latest orders and judgments</li>
                            <li>PDF downloads for court documents</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features -->
        <div class="row mt-4">
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-database fa-3x text-primary mb-3"></i>
                        <h5>Data Storage</h5>
                        <p class="small text-muted">All searches and results are logged in SQLite database for future reference.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-shield-alt fa-3x text-success mb-3"></i>
                        <h5>CAPTCHA Handling</h5>
                        <p class="small text-muted">Automated CAPTCHA solving with manual fallback for reliable access.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-download fa-3x text-info mb-3"></i>
                        <h5>PDF Downloads</h5>
                        <p class="small text-muted">Download court orders and judgments directly from the application.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const searchForm = document.getElementById('searchForm');
    const searchBtn = document.getElementById('searchBtn');
    
    searchForm.addEventListener('submit', function() {
        // Disable button and show loading state
        searchBtn.disabled = true;
        searchBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Searching...';
        
        // Re-enable after a delay (in case of errors)
        setTimeout(() => {
            searchBtn.disabled = false;
            searchBtn.innerHTML = '<i class="fas fa-search me-2"></i>Search Case';
        }, 30000);
    });
    
    // Form validation
    const inputs = searchForm.querySelectorAll('input, select');
    inputs.forEach(input => {
        input.addEventListener('change', function() {
            const allFilled = Array.from(inputs).every(input => input.value.trim() !== '');
            searchBtn.disabled = !allFilled;
        });
    });
});
</script>
{% endblock %} 